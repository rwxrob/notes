## Release notes

- https://github.com/kubernetes-sigs/kubespray/releases/tag/v2.27.0 (k8s v1.31.4)
## Points of interest

- MULTIPLE breaking changes to inventory files from previous `inventory/sample` format
- Need to add `kubeadm_ignore_preflight_errors`
- Support for `kubeadm` v1beta4 API upgrade
- Cilium is getting more and more traction do we want to consider it?
- Support Configuring EncryptionAlgorithm in Kubeadm v1beta4?
- Upgrade CoreDNS version to v1.11.3
- Running kubespray with --limit without cached facts is no longer supported.
- HA etcd cluster keeps quorum during upgrades.
- Kubernetes v1.31.4
- Calico v3.29.1
- Containerd v1.7.24

## Actions required

- Update `kube_version` in `inventory/group_vars/k8s_cluster/k8s-cluster.yml` to `v1.31.4`
- Patch `group_vars/k8s_cluster/k8s-cluster.yml` to use array
    ```diff
    365,383c369,373
    < kubeadm_patches_dir: "{{ kube_config_dir }}/patches"
    < kubeadm_patches: []
    < # See https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/control-plane-flags/#patches
    < # Correspondance with this link
    < # patchtype = type
    < # target = target
    < # suffix -> managed automatically
    < # extension -> always "yaml"
    < # kubeadm_patches:
    < # - target: kube-apiserver|kube-controller-manager|kube-scheduler|etcd|kubeletconfiguration < #   type: strategic(default)|json|merge
    < #   patch:
    < #    metadata:
    < #      annotations:
    < #        example.com/test: "true"
    < #      labels:
    < #        example.com/prod_level: "{{ prod_level }}"
    < # - ...
    < # Patches are applied in the order they are specified.
    ---
    > # kubeadm patches path
    > kubeadm_patches:
    >   enabled: false
    >   source_dir: "{{ inventory_dir }}/patches"
    >   dest_dir: "{{ kube_config_dir }}/patches"
    ```
